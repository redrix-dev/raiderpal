@import "tailwindcss";
@source "./**/*.{ts,tsx,mdx}";
@source "../components/**/*.{ts,tsx}";
@source "../stories/**/*.{ts,tsx,mdx}";

@theme {
  --color-brand-cyan: #4fc1e9;
  --color-brand-amber: #f1aa1c;
  --color-text-primary: #e3ddd4;
  --color-text-muted: #8ea0b8;
  --color-surface-base: #050910;
  --color-surface-panel: #130918;
  --color-surface-card: #07040f;
  --color-border-strong: #130918;
  --color-border-subtle: rgba(255, 255, 255, 0.06);

  colors: {
    brand: {
      cyan: var(--color-brand-cyan);
      amber: var(--color-brand-amber);
    };
    text: {
      primary: var(--color-text-primary);
      muted: var(--color-text-muted);
    };
    surface: {
      base: var(--color-surface-base);
      panel: var(--color-surface-panel);
      card: var(--color-surface-card);
    };
    border: {
      strong: var(--color-border-strong);
      subtle: var(--color-border-subtle);
    };
  };

  fontFamily: {
    sans: 'var(--font-barlow, "Barlow", system-ui, -apple-system, "Segoe UI", sans-serif)';
    condensed:
      'var(--font-barlow-condensed, "Barlow Condensed", "Barlow", system-ui, -apple-system, "Segoe UI", sans-serif)';
  };
}

:root {
  --wallpaper-url: none; /* optional hero wallpaper; set to url(...) if needed */
  --texture-url: url("/textures/ARC_Raiders_Background_Texture.png");
  --wallpaper-overlay: rgba(5, 9, 16, 0);
}

/* Tailwind v4 theme helpers can confuse CSS validators. If your editor flags
   unknown at-rules, add at-rule-no-unknown ignores in your linter config. */

body {
  position: relative;
  background: theme("colors.surface.base");
  color: theme("colors.text.primary");
  font-family: theme("fontFamily.sans");
  min-height: 100vh;
}

/* Optional wallpaper treatment */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background-image: var(--texture-url);
  background-size: 900px auto;
  background-position: center;
  background-repeat: repeat;
  background-blend-mode: screen;
  opacity: 0.95;
  pointer-events: none;
  z-index: 0;
}

/* Overlay to maintain contrast */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: linear-gradient(180deg, var(--wallpaper-overlay), var(--wallpaper-overlay));
  pointer-events: none;
  z-index: 1;
}

/* Prevent mobile Safari zoom on form controls */
input,
select,
textarea {
  font-size: 16px;
  position: relative;
  z-index: 2;
}

/* Slider styling: cyan thumb/active, warm inactive track */
input[type="range"] {
  accent-color: theme("colors.brand.cyan");
}
input[type="range"]::-webkit-slider-runnable-track {
  background: linear-gradient(
      to right,
      color-mix(in srgb, theme("colors.brand.cyan") 60%, transparent) 0%,
      color-mix(in srgb, theme("colors.brand.cyan") 60%, transparent) var(--tw-range-progress, 50%),
      color-mix(in srgb, theme("colors.text.primary") 20%, transparent) var(--tw-range-progress, 50%),
      color-mix(in srgb, theme("colors.text.primary") 20%, transparent) 100%
    );
  height: 4px;
  border-radius: 9999px;
}
input[type="range"]::-webkit-slider-thumb {
  background: theme("colors.brand.cyan");
  border: 1px solid theme("colors.brand.cyan");
}
input[type="range"]::-moz-range-track {
  background: color-mix(in srgb, theme("colors.text.primary") 20%, transparent);
  height: 4px;
  border-radius: 9999px;
}
input[type="range"]::-moz-range-progress {
  background: color-mix(in srgb, theme("colors.brand.cyan") 60%, transparent);
  height: 4px;
  border-radius: 9999px;
}
input[type="range"]::-moz-range-thumb {
  background: theme("colors.brand.cyan");
  border: 1px solid theme("colors.brand.cyan");
}

@layer components {
  /* Main inner panels (tool bodies, info sections) */
  .rp-panel {
    @apply rounded-xl border p-4 sm:p-5;
    border-color: theme("colors.border.strong");
    background-image: linear-gradient(rgba(5, 9, 16, 0.35), rgba(5, 9, 16, 0.35)),
      url("/backgrounds/ARC_Raiders_Module_Background.png");
    background-repeat: repeat-x;
    background-size: auto 140%;
    background-position: center;
    background-color: color-mix(in srgb, theme("colors.surface.panel") 60%, transparent);
    color: theme("colors.text.primary");
  }

  /* Secondary cards inside panels (subsections, result blocks) */
  .rp-card {
    @apply rounded-lg border p-4;
    border-color: theme("colors.border.subtle");
    background-color: color-mix(in srgb, theme("colors.surface.card") 92%, transparent);
    color: theme("colors.text.primary");
  }

  /* Generic pill/tag (non-rarity) */
  .rp-pill {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-[11px] font-medium;
    background-color: color-mix(in srgb, theme("colors.surface.panel") 90%, transparent);
    color: theme("colors.text.primary");
    border: 1px solid color-mix(in srgb, theme("colors.text.primary") 16%, transparent);
  }

  /* Accent pill for highlighted states */
  .rp-pill-accent {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-[11px] font-semibold;
    background-color: theme("colors.brand.amber");
    color: #1a0704;
  }
}

/* Panel texture helper: deep blue module texture with subtle tint */
.bg-panel-texture {
  background-image: linear-gradient(rgba(5, 9, 16, 0.35), rgba(5, 9, 16, 0.35)),
    url("/backgrounds/ARC_Raiders_Module_Background.png");
  background-repeat: repeat-x;
  background-size: auto 140%;
  background-position: center;
  background-color: color-mix(in srgb, theme("colors.surface.panel") 60%, transparent);
}

.text-warm {
  color: theme("colors.text.primary");
}

.text-warm-muted {
  color: theme("colors.text.muted");
}
