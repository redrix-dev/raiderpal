@import "tailwindcss";
@source "./**/*.{ts,tsx,mdx}";
@source "../components/**/*.{ts,tsx}";
@source "../stories/**/*.{ts,tsx,mdx}";

:root {
  /* Semantic palette used across the app */
  --color-brand-cyan: #4fc1e9;
  --color-brand-amber: #f1aa1c;
  --color-text-primary: #e3ddd4;
  --color-text-muted: #8ea0b8;
  --color-surface-base: #050910;
  --color-surface-panel: #130918;
  --color-surface-card: #07040f;
  --color-border-strong: #130918;
  --color-border-subtle: rgba(255, 255, 255, 0.06);

  /* Font fallbacks mirror the Tailwind theme */
  --font-sans: var(--font-barlow, "Barlow", system-ui, -apple-system, "Segoe UI", sans-serif);
  --font-condensed: var(
    --font-barlow-condensed,
    "Barlow Condensed",
    "Barlow",
    system-ui,
    -apple-system,
    "Segoe UI",
    sans-serif
  );

  --wallpaper-url: none; /* optional hero wallpaper; set to url(...) if needed */
  --texture-url: url("/textures/ARC_Raiders_Background_Texture.png");
  --wallpaper-overlay: rgba(5, 9, 16, 0);
}

/* Tailwind v4 theme helpers can confuse CSS validators. If your editor flags
   unknown at-rules, add at-rule-no-unknown ignores in your linter config. */

body {
  position: relative;
  background: var(--color-surface-base);
  color: var(--color-text-primary);
  font-family: var(--font-sans);
  min-height: 100vh;
}

/* Optional wallpaper treatment */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background-image: var(--texture-url);
  background-size: 900px auto;
  background-position: center;
  background-repeat: repeat;
  background-blend-mode: screen;
  opacity: 0.95;
  pointer-events: none;
  z-index: 0;
}

/* Overlay to maintain contrast */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: linear-gradient(180deg, var(--wallpaper-overlay), var(--wallpaper-overlay));
  pointer-events: none;
  z-index: 1;
}

/* Prevent mobile Safari zoom on form controls */
input,
select,
textarea {
  font-size: 16px;
  position: relative;
  z-index: 2;
}

/* Slider styling: cyan thumb/active, warm inactive track */
input[type="range"] {
  accent-color: var(--color-brand-cyan);
}
input[type="range"]::-webkit-slider-runnable-track {
  background: linear-gradient(
      to right,
      color-mix(in srgb, var(--color-brand-cyan) 60%, transparent) 0%,
      color-mix(in srgb, var(--color-brand-cyan) 60%, transparent) var(--tw-range-progress, 50%),
      color-mix(in srgb, var(--color-text-primary) 20%, transparent) var(--tw-range-progress, 50%),
      color-mix(in srgb, var(--color-text-primary) 20%, transparent) 100%
    );
  height: 4px;
  border-radius: 9999px;
}
input[type="range"]::-webkit-slider-thumb {
  background: var(--color-brand-cyan);
  border: 1px solid var(--color-brand-cyan);
}
input[type="range"]::-moz-range-track {
  background: color-mix(in srgb, var(--color-text-primary) 20%, transparent);
  height: 4px;
  border-radius: 9999px;
}
input[type="range"]::-moz-range-progress {
  background: color-mix(in srgb, var(--color-brand-cyan) 60%, transparent);
  height: 4px;
  border-radius: 9999px;
}
input[type="range"]::-moz-range-thumb {
  background: var(--color-brand-cyan);
  border: 1px solid var(--color-brand-cyan);
}

@layer components {
  /* Main inner panels (tool bodies, info sections) */
  .rp-panel {
    @apply rounded-xl border p-4 sm:p-5;
    border-color: var(--color-border-strong);
    background-image: linear-gradient(rgba(5, 9, 16, 0.35), rgba(5, 9, 16, 0.35)),
      url("/backgrounds/ARC_Raiders_Module_Background.png");
    background-repeat: repeat-x;
    background-size: auto 140%;
    background-position: center;
    background-color: color-mix(in srgb, var(--color-surface-panel) 60%, transparent);
    color: var(--color-text-primary);
  }

  /* Secondary cards inside panels (subsections, result blocks) */
  .rp-card {
    @apply rounded-lg border p-4;
    border-color: var(--color-border-subtle);
    background-color: color-mix(in srgb, var(--color-surface-card) 92%, transparent);
    color: var(--color-text-primary);
  }

  /* Generic pill/tag (non-rarity) */
  .rp-pill {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-[11px] font-medium;
    background-color: color-mix(in srgb, var(--color-surface-panel) 90%, transparent);
    color: var(--color-text-primary);
    border: 1px solid color-mix(in srgb, var(--color-text-primary) 16%, transparent);
  }

  /* Accent pill for highlighted states */
  .rp-pill-accent {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-[11px] font-semibold;
    background-color: var(--color-brand-amber);
    color: #1a0704;
  }
}

/* Panel texture helper: deep blue module texture with subtle tint */
.bg-panel-texture {
  background-image: linear-gradient(rgba(5, 9, 16, 0.35), rgba(5, 9, 16, 0.35)),
    url("/backgrounds/ARC_Raiders_Module_Background.png");
  background-repeat: repeat-x;
  background-size: auto 140%;
  background-position: center;
  background-color: color-mix(in srgb, var(--color-surface-panel) 60%, transparent);
}

.text-warm {
  color: var(--color-text-primary);
}

.text-warm-muted {
  color: var(--color-text-muted);
}
